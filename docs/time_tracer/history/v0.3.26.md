## 0.3.26.0 - 2026-01-09

### 核心架构重构 (Refactor)

* **路径管理升级**：核心组件全面采用 C++17 `std::filesystem::path` 替代 `std::string` 进行文件路径管理，以提供更强的类型安全性和跨平台兼容性。
* **AppConfig**：结构体中所有路径相关的成员变量（如 `exe_dir_path`, `*_config_path`, `export_path` 等）类型变更为 `fs::path`。
* **ConfigLoader**：内部路径处理及 `load_configuration()` 返回的配置对象已适配新的路径类型。
* **FileController**：文件控制器的路径成员及相关接口已更新，消除了路径字符串转换的开销。



### 共享模块与工具 (Shared & Utils)

* **ConfigUtils**：`load_json_config` 函数签名已更新，现在接受 `const std::filesystem::path&` 作为配置文件路径参数，利用 `std::ifstream` 对 `fs::path` 的原生支持。
* **接口一致性**：`reprocessing` 模块现与核心配置无缝对接，消除了隐式类型转换。

### 报表模块更新 (Reports)

* **日报 (Daily)**：
* `DayBaseConfig` 及其子类 (`DayMdConfig`, `DayTexConfig`, `DayTypConfig`) 构造函数已更新，接受 `fs::path` 类型的配置路径。

* **月报 (Monthly)**：
* `MonthBaseConfig` 及其子类 (`MonthMdConfig`, `MonthTexConfig`, `MonthTypConfig`) 构造函数已更新适配。

* **周期报告 (Period)**：
* `PeriodBaseConfig` 及其子类 (`PeriodMdConfig`, `PeriodTexConfig`, `PeriodTypConfig`) 构造函数已更新适配。

### 重要变更 (Breaking Changes)

* **ABI 兼容性破坏**：由于 `AppConfig` 结构体的内存布局发生变化（`std::string` 替换为 `std::filesystem::path`），**所有插件 DLL（日报、月报、周期报告的格式化器）必须重新编译**。旧版本的插件将无法加载或导致程序崩溃。
* **源代码兼容性**：大多数使用 `std::string` 进行路径拼接的代码仍可通过 `fs::path` 的 `/` 运算符兼容，但部分显式依赖 `std::string` 接口的调用可能需要调用 `.string()` 方法进行适配。

## 0.3.26.1 - 2026-01-10

### 命令行更新

export all-daily --format 现在支持多个参数传入，例如

--format md,typ,tex
### json配置更新
config.json修改为层级结构 "system" "processing" "reports"

### 分离职责

用户配置验证移动到config_validator

dll文件检验移动到bootstrap

action_handler不负责检验

## 0.3.26.2 - 2026-01-10
### 修改日期存储格式
预处理，数据库插入 查询的日期都改为YYYY-MM-DD格式

但是主键还是用YYYYMMDD

## 0.3.26.3 - 2026-01-10
### 优化命令
convert现在默认会把json保存到本地
### 修复月报告错误
之前的月报告通过获取长度来实现标题的输出，现在直接使用
### 优化db_inserter
文件读取由file_handler实现

DataImporter不再有具体实现


## 0.3.26.4 - 2026-01-10
### action_handler命名修改为core，core文件操作依赖file_handler
现在action_handler与文件的交互都由file_handler来完成

action_handler命名修改为core

## 0.3.26.5 - 2026-01-10
### config文件夹移动到src同级目录
### file_handler命名修改为io
### 支持日备注多行注释

typ md tex都实现了

例如
r 我是第一行
r 我是第二行
r 我是第三行


## 0.3.26.6 - 2026-01-10

### 模块重命名与结构调整

* **变更**：将原有的 `db_inserter` 模块重命名为 **`importer`**。
* **说明**：这不仅仅是名字的修改，更代表了职责的泛化。它不再局限于“插入数据库”这个动作，而是承担起“数据导入”的完整业务职责，涵盖了从外部数据源（JSON/内存对象）到内部存储（SQLite）的转化过程。

### Importer 与 IO 彻底解耦

这是本次重构的核心架构升级，实现了**关注点分离 (Separation of Concerns)**：

1. **去 IO 化 (Pure Logic)**：
* `importer` 模块不再包含任何文件读取代码（如 `fstream` 或 `filesystem` 遍历）。
* 它现在的接口只接收**纯数据**（如内存中的 JSON 字符串或 `InputData` 对象列表），专注于数据解析和入库逻辑。


2. **控制反转 (Inversion of Control)**：
* **Core 层掌权**：文件读取的职责上浮到了 `Core` 层（具体在 `WorkflowHandler` 中）。
* **流程变更**：以前是 `importer` 自己去磁盘找文件读；现在是 `Core` 层的 `WorkflowHandler` 先利用 `IO` 模块把文件读进内存，然后“喂”给 `importer` 处理。

### 重构带来的收益

* **支持内存直连**：由于 `importer` 接受内存对象，现在的流水线可以实现 **Converter (内存) -> Importer (内存) -> DB** 的直接导入，无需在磁盘上生成中间的 `.json` 文件，大幅提升了性能。
* **可测试性增强**：无需构造复杂的临时文件目录即可对导入逻辑进行单元测试。
* **职责清晰**：`IO` 模块专注读写，`Importer` 专注业务，`Core` 专注调度，代码结构更加健壮。



