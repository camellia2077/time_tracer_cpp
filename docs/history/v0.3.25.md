## 0.3.25.1 - 2025-11-13
1.  **创建核心库 (`libreports_shared.dll`)**:
    * 将所有模块（`md`, `tex`, `typ`）都依赖的**共享代码**（例如 `DayBaseConfig`、`MonthBaseConfig`、`PeriodBaseConfig`、以及所有的 `Utils` 函数）集中起来。
    * 在 `SourceFileCollection.cmake` 中，将 `reports_shared` 库的类型从 `STATIC` 修改为 `SHARED`。
    * 使用 `REPORTS_SHARED_API` 宏（`__declspec(dllexport)`） 将这些共享类和函数的接口从 `libreports_shared.dll` 中**导出**，使其成为一个可被其他模块依赖的“核心SDK”。

2.  **格式化插件 (如 `libDayMdFormatter.dll`) 采用动态链接**:
    * 格式化插件（如 `libDayMdFormatter.dll`）现在只包含它们自己的特定实现逻辑（例如 `DayMd.cpp` 和 `MarkdownStrategy.hpp`）。
    * 在它们的 `CMakeLists.txt` 中，`target_link_libraries(... reports_shared)` 命令现在会将这个插件**动态链接**到 `libreports_shared.dll`。这使得插件可以使用 `DayBaseConfig` 等共享功能，而无需将代码复制到自己内部。
    * 主程序 `time_tracker_cli.exe` 则通过 `DllFormatterWrapper` 来**动态加载**（使用 `LoadLibraryA`）这些轻量级的插件DLL，实现了最终的插件化。

## 0.3.25.2 - 2025-12-19
1. **libreports_shared.dll放到exe同级别目录**
libreports_shared.dll是程序运行必不可少的一部分，不应该放入plugins文件夹里面

2. **支持日报告在json中自定义statistics_items**
在日报告json中自定义statistics_items,而不是硬编码在cpp里面
{
            "label": "Sleep Time",
            "db_column": "sleep_total_time",
            "show": true
},


## 0.3.25.3 - 2025-12-21

### 1. 更新摘要 (Overview)

1. **给日、月、周期的所有格式的具体活动内容加上标题**
2. **`ProjectTreeFormatter.cpp` 重构**：`generate_sorted_output` 函数由递归改为循环实现。
* *路径*: `reports/shared/formatters/base/ProjectTreeFormatter.cpp`
* *逻辑*: 使用 `std::stack`（迭代法）替代深度优先搜索（DFS），将内存占用从栈转移至堆，规避栈溢出风险。


3. **代码复用**：`DayTyp.cpp` 正式复用 `ProjectTreeFormatter` 核心逻辑。
4. **数据结构优化**：`ProjectNode` 内部结构由 `std::map` 修改为 `std::unordered_map`。
* *原因*: 消除 `std::map` 自动排序带来的无效开销（程序后续会根据 `duration` 手动重排）。
* *性能*: 插入与查找的平均时间复杂度由  优化至 。


### 2. 核心组件重构 (Core Refactoring)

| 维度 | 说明 |
| --- | --- |
| **涉及文件** | `ProjectTreeFormatter.cpp` & `.hpp` |
| **消除递归** | 重写为基于 `std::stack` 的迭代算法，支持深层嵌套。 |
| **接口导出** | 添加 `REPORTS_SHARED_API` 宏，解决 DLL 链接时的 `undefined reference` 错误。 |

### 3. 格式化器代码复用 (Code Reuse)

所有格式化器均已复用 `ProjectTreeFormatter`，并通过**策略模式**实现差异化输出，不再依赖 `MarkdownUtils` 或 `TypUtils`。

#### A. 日报 (Daily Reports)

* **`DayTyp.cpp`**
* 移除 `TypUtils.hpp`。
* 内部定义 `TypstFormattingStrategy`。


* **`DayMd.cpp`**
* 移除 `MarkdownUtils.hpp`。
* 内部定义 `MarkdownFormattingStrategy`。



#### B. 月报 (Monthly Reports)

* **`MonthTyp.cpp`**
* 移除旧依赖，实现月报专用 Typst 策略。


* **`MonthMd.cpp`**
* 移除旧依赖，实现月报专用 Markdown 策略。



#### C. 周期报告 (Period Reports)

* **`PeriodTyp.cpp`**
* 移除旧依赖，实现周期报告专用 Typst 策略。


* **`PeriodMd.cpp`**
* 移除旧依赖，实现周期报告专用 Markdown 策略。


## 0.3.25.3 - 2025-12-27
### 优化日期检查命令
现在日期检查为可选--date-check <mode>
continuity：检查记录之间是否存在缺失的日期（检查间断性）。
full 或 strict：进行严格检查，确认该月份内的所有日期是否完整（检查完整性）。

默认都关闭

### run-pipeline新增选项控制
run-pipeline
支持 --date-check，默认关闭

### validate-source优化
现在validate-source支持传入单个json或文件夹(遍历文件夹寻找json)
如果没有传入指定路径，则去convert那一步生成的json路径去寻找

### main_cli中的打印cli用法，提取到cli模块
提取为CliHelp.cpp CliHelp.hpp



    
    



