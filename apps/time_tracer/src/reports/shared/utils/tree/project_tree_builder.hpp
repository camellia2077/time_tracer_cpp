// reports/shared/utils/tree/project_tree_builder.hpp
#ifndef REPORTS_SHARED_UTILS_TREE_PROJECT_TREE_BUILDER_HPP_
#define REPORTS_SHARED_UTILS_TREE_PROJECT_TREE_BUILDER_HPP_

#include <string>
#include <vector>
#include <sqlite3.h>
#include "reports/shared/model/project_tree.hpp"
#include "reports/shared/api/shared_api.hpp"
#include "reports/shared/interfaces/i_project_info_provider.hpp"

REPORTS_SHARED_API void build_project_tree_from_records(
    reporting::ProjectTree& tree,
    const std::vector<std::pair<std::string, long long>>& records
);

// [修改] 接口变动：移除 sqlite3*, 增加 IProjectInfoProvider&
REPORTS_SHARED_API void build_project_tree_from_ids(
    reporting::ProjectTree& tree,
    const std::vector<std::pair<long long, long long>>& id_records,
    const IProjectInfoProvider& provider // [修改]
);

#endif // REPORTS_SHARED_UTILS_TREE_PROJECT_TREE_BUILDER_HPP_